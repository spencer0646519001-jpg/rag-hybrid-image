<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>RAG MVP – 多語搜尋助理</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg1:#ffe08a; --bg2:#ffb66e;
      --card:#ffffff; --text:#1f2937; --muted:#6b7280; --accent:#111827;
      --btn:#111827; --btnText:#fff; --btnGhost:#111827; --btnGhostBg:#f3f4f6;
      --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text);
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex; align-items:center; justify-content:center;
      padding:28px;
    }
    .shell{max-width:820px; width:100%;}
    .card{
      background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:28px 28px 22px; position:relative;
    }
    .brand{
      display:flex; align-items:center; gap:12px; margin-bottom:6px;
    }
    .brand .logo{
      width:40px; height:40px; border-radius:12px; display:grid; place-items:center;
      background:#111827; color:#fff; font-weight:700; font-size:20px;
      box-shadow:0 6px 14px rgba(0,0,0,.12);
    }
    h1{font-size:28px; margin:0 0 12px}
    p{margin:0; color:var(--muted); font-size:14px}
    .row{display:flex; gap:10px; margin-top:18px; flex-wrap:wrap}
    .btn{
      padding:10px 16px; border:none; border-radius:999px; cursor:pointer; font-weight:600;
      transition:.15s transform ease, .2s box-shadow ease; outline:none;
    }
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:var(--btn); color:var(--btnText)}
    .btn-ghost{background:var(--btnGhostBg); color:var(--btnGhost)}
    .muted{margin-top:14px; font-size:13px}
    .lang-switch{
      position:absolute; right:16px; top:16px; display:flex; gap:6px;
    }
    .lang-switch .pill{
      background:#fff; padding:6px 10px; border-radius:999px; font-size:12px; cursor:pointer;
      border:1px solid #e5e7eb;
    }
    .pill.active{background:#111827; color:#fff; border-color:#111827}
    @media (max-width:560px){
      h1{font-size:22px}
      .row{gap:8px}
      .btn{padding:9px 14px}
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card" id="card">
      <!-- 右上角 UI 語言即時切換 -->
      <div class="lang-switch" id="uiSwitch">
        <span class="pill" data-ui="zh">中文</span>
        <span class="pill active" data-ui="en">English</span>
        <span class="pill" data-ui="ja">日本語</span>
      </div>

      <div class="brand">
        <div class="logo">R</div>
        <div style="font-weight:700">RAG 甜點知識庫</div>
      </div>

      <h1 id="title">Choose your language</h1>
      <p id="subtitle">You can switch later from the top-right corner.</p>

      <div class="row">
        <button class="btn btn-ghost" id="btn-zh">Chinese (Taiwan)</button>
        <button class="btn btn-ghost" id="btn-en">English</button>
        <button class="btn btn-ghost" id="btn-ja">Japanese</button>
      </div>

      <p class="muted" id="note">You can switch later from the top-right corner.</p>
    </div>
  </div>

  <script>
    // --- 文案字典 ---
    const i18n = {
      en: {
        title: "Choose your language",
        subtitle: "You can switch later from the top-right corner.",
        zh: "Chinese (Taiwan)",
        en: "English",
        ja: "Japanese",
        note: "You can switch later from the top-right corner."
      },
      zh: {
        title: "選擇你的使用語言",
        subtitle: "稍後可從右上角的語言鍵切換。",
        zh: "中文（台灣）",
        en: "英文",
        ja: "日文",
        note: "稍後可從右上角的語言鍵切換。"
      },
      ja: {
        title: "使用言語を選択してください",
        subtitle: "右上の言語ボタンから後で切り替えできます。",
        zh: "中国語（台湾）",
        en: "英語",
        ja: "日本語",
        note: "右上の言語ボタンから後で切り替えできます。"
      }
    };

    // 取得 / 設定 UI 語言（預設 en）
    const getUi = () => localStorage.getItem("ui_lang") || "en";
    const setUi = (ui) => localStorage.setItem("ui_lang", ui);

    // 顯示當前 UI 語言文案
    function renderUi(ui) {
      const dict = i18n[ui] || i18n.en;
      document.getElementById("title").textContent = dict.title;
      document.getElementById("subtitle").textContent = dict.subtitle;
      document.getElementById("btn-zh").textContent = dict.zh;
      document.getElementById("btn-en").textContent = dict.en;
      document.getElementById("btn-ja").textContent = dict.ja;
      document.getElementById("note").textContent = dict.note;

      document.querySelectorAll(".lang-switch .pill").forEach(p=>{
        p.classList.toggle("active", p.dataset.ui === ui);
      });
    }

    // 點右上角 pill 即時切換 UI 語言
    document.getElementById("uiSwitch").addEventListener("click", (e)=>{
      const pill = e.target.closest(".pill");
      if (!pill) return;
      const ui = pill.dataset.ui;
      setUi(ui);
      renderUi(ui);
    });

    // 點選語言按鈕 → 設定 doc 語言、ui 語言 → 導向 search.html
    function go(ui, doc){
      setUi(ui);
      localStorage.setItem("doc_lang", doc);
      const url = `search.html?ui=${encodeURIComponent(ui)}&doc=${encodeURIComponent(doc)}`;
      window.location.href = url;
    }

    document.getElementById("btn-zh").addEventListener("click", ()=>go(getUi(),"zh"));
    document.getElementById("btn-en").addEventListener("click", ()=>go(getUi(),"en"));
    document.getElementById("btn-ja").addEventListener("click", ()=>go(getUi(),"ja"));

    // 初始渲染
    renderUi(getUi());
  </script>
</body>
</html>
